!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.app={})}(this,function(t){"use strict";function n(t,e){for(var n=[],o=[],r=arguments.length;2<r--;)n.push(arguments[r]);for(;n.length;){var u=n.pop();if(u&&u.pop)for(r=u.length;r--;)n.push(u[r]);else null!=u&&!0!==u&&!1!==u&&o.push(u)}return"function"==typeof t?t(e||{},o):{nodeName:t,attributes:e||{},children:o,key:e&&e.key}}var o={All:0,Active:1,Completed:2},u=function(t,e){var n=arguments.length<=2?void 0:arguments[2];return t.map(function(t){return e===t.id?Object.assign({},t,n):t})},e="todos-hyperapp",r=function(){return JSON.parse(localStorage.getItem(e)||"[]")},i=function(t){return localStorage.setItem(e,JSON.stringify(t))},l={input:function(t){var e=t.value;return function(t){return{input:e}}},add:function(){return function(t){var e=t.todos.concat({id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),done:!1,editing:!1,value:t.input});return i(e),{input:"",todos:e}}},editUpdate:function(t){var o=t.uuid,r=t.value;return function(t,e){var n=u(t.todos,o,{editing:!1,value:r});return i(n),{todos:n}}},editEnter:function(t){var n=t.uuid,o=t.e;return function(t,e){e.editEnterDbClick(n),e.editEnterFocus(o)}},editEnterDbClick:function(o){return function(t,e){var n=u(t.todos,o,{editing:!0});return i(n),{todos:n}}},editEnterFocus:function(n){return function(t,e){n.target.parentNode.parentNode.querySelector(".edit").focus()}},remove:function(t){var o=t.uuid;return function(t,e){var n=t.todos.filter(function(t){return o!==t.id});return i(n),{todos:n}}},toggle:function(t){var o=t.uuid;return function(t,e){var n=t.todos.map(function(t){return o===t.id?Object.assign({},t,{done:!t.done}):t});return i(n),{todos:n}}},toggleAll:function(r){return function(t,e){var n=r.target.previousSibling.checked;n=!n;var o=t.todos.map(function(t){return t.done=n,t});return i(o),{todos:o}}},filter:function(t){var n=t.value;return function(t,e){return{filter:n}}},clearCompleted:function(){return function(t){var e=t.todos.filter(function(t){return!t.done});return i(e),{todos:e}}}},a={input:"",placeholder:"What needs to be done?",todos:[],filter:o.All},c=function(){return n("header",{className:"header"},n("h1",null,"todos"))},d=function(){return n("footer",{className:"info"},n("p",null,"Double-click to edit a todo"),n("p",null,"Written by ",n("a",{href:"http://dangthanh.org"},"Dang Van Thanh")),n("p",null,"Part of ",n("a",{href:"http://todomvc.com"},"TodoMVC")))},f=function(e){return n("div",null,n("input",{type:"text",class:"new-todo",onkeyup:function(t){return 13===t.keyCode&&""!==t.target.value?e.actions.add():null},oninput:function(t){return e.actions.input({value:t.target.value})},value:e.state.input,placeholder:e.state.placeholder}))},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var p=function(e){return n("li",{class:function t(e){var n="",o=void 0===e?"undefined":s(e);if("string"===o||"number"===o)return e||"";if(Array.isArray(e)&&0<e.length)for(var r=0,u=e.length;r<u;r++){var i=t(e[r]);i&&(n+=(n&&" ")+i)}else for(var l in e)e.hasOwnProperty(l)&&e[l]&&(n+=(n&&" ")+l);return n}(["todo",{completed:e.todo.done,editing:e.todo.editing}]),key:e.todo.id},n("div",{className:"view"},n("input",{type:"checkbox",class:"toggle",checked:!!e.todo.done,onclick:function(t){return e.actions.toggle({uuid:e.todo.id})}}),n("label",{ondblclick:function(t){return e.actions.editEnter({uuid:e.todo.id,e:t})}},e.todo.value),n("button",{class:"destroy",onclick:function(t){return e.actions.remove({uuid:e.todo.id})}})),n("input",{type:"text",class:"edit",onkeyup:function(t){return 13===t.keyCode?e.actions.editUpdate({uuid:e.todo.id,value:t.target.value}):null},onblur:function(t){return e.actions.editUpdate({uuid:e.todo.id,value:t.target.value})},value:e.todo.value}))},v=function(e){return n("ul",{class:"todo-list"},e.todos.filter(function(t){return e.filter===o.Completed?t.done:e.filter===o.Active?!t.done:e.filter===o.All}).map(function(t){return n(p,{todo:t,actions:e.actions})}))},g=function(t){return n("button",{className:"clear-completed",onclick:t.clearCompleted},"Clear completed")},m=function(e){return n("footer",{className:"footer"},n("span",{className:"todo-count"},e.state.todos.filter(function(t){return!t.done}).length," item left"),n("ul",{className:"filters"},Object.keys(o).map(function(t){return n("li",null,n("a",{href:"#",class:e.state.filter===o[t]?"selected":"",onclick:function(){return e.actions.filter({value:o[t]})}},t))})),0<e.state.todos.filter(function(t){return t.done}).length?n(g,{clearCompleted:e.actions.clearCompleted}):"")},h=function(e){return n("div",null,n("input",{type:"checkbox",className:"toggle-all",id:"toggle-all"}),n("label",{htmlFor:"toggle-all",onclick:function(t){return e.toggleAll(t)}},"Mark all as complete"))};a.todos=r(),a.todos=a.todos.map(function(t){return t.editing=!1,t});var y=function(t,e,n,o){var r,u=[].map,i=o&&o.children[0]||null,l=i&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:u.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(i),h=[],y=!0,a=b(t),c=function t(o,r,u){for(var e in u)"function"==typeof u[e]?function(t,n){u[t]=function(t){var e=n(t);return"function"==typeof e&&(e=e(p(o,a),u)),e&&e!==(r=p(o,a))&&!e.then&&f(a=s(o,b(r,e),a)),e}}(e,u[e]):t(o.concat(e),r[e]=b(r[e]),u[e]=b(u[e]));return u}([],a,b(e));return f(),c;function x(t){return"function"==typeof t?x(t(a,c)):null!=t?t:""}function d(){r=!r;var t=x(n);for(o&&!r&&(i=function t(e,n,o,r,u){if(r===o);else if(null==o||o.nodeName!==r.nodeName){var i=function t(e,n){var o="string"==typeof e||"number"==typeof e?document.createTextNode(e):(n=n||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),r=e.attributes;if(r){r.oncreate&&h.push(function(){r.oncreate(o)});for(var u=0;u<e.children.length;u++)o.appendChild(t(e.children[u]=x(e.children[u]),n));for(var i in r)k(o,i,r[i],null,n)}return o}(r,u);e.insertBefore(i,n),null!=o&&C(e,n,o),n=i}else if(null==o.nodeName)n.nodeValue=r;else{!function(t,e,n,o){for(var r in b(e,n))n[r]!==("value"===r||"checked"===r?t[r]:e[r])&&k(t,r,n[r],e[r],o);var u=y?n.oncreate:n.onupdate;u&&h.push(function(){u(t,e)})}(n,o.attributes,r.attributes,u=u||"svg"===r.nodeName);for(var l={},a={},c=[],d=o.children,f=r.children,s=0;s<d.length;s++){c[s]=n.childNodes[s];var p=N(d[s]);null!=p&&(l[p]=[c[s],d[s]])}for(var s=0,v=0;v<f.length;){var p=N(d[s]),g=N(f[v]=x(f[v]));if(a[p])s++;else if(null==g||g!==N(d[s+1]))if(null==g||y)null==p&&(t(n,c[s],d[s],f[v],u),v++),s++;else{var m=l[g]||[];p===g?(t(n,m[0],m[1],f[v],u),s++):m[0]?t(n,n.insertBefore(m[0],c[s]),m[1],f[v],u):t(n,c[s],null,f[v],u),a[g]=f[v],v++}else null==p&&C(n,c[s],d[s]),s++}for(;s<d.length;)null==N(d[s])&&C(n,c[s],d[s]),s++;for(var s in l)a[s]||C(n,l[s][0],l[s][1])}return n}(o,i,l,l=t)),y=!1;h.length;)h.pop()()}function f(){r||(r=!0,setTimeout(d))}function b(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}function s(t,e,n){var o={};return t.length?(o[t[0]]=1<t.length?s(t.slice(1),e,n[t[0]]):e,b(n,o)):e}function p(t,e){for(var n=0;n<t.length;)e=e[t[n++]];return e}function N(t){return t?t.key:null}function v(t){return t.currentTarget.events[t.type](t)}function k(t,e,n,o,r){if("key"===e);else if("style"===e)for(var u in b(o,n)){var i=null==n||null==n[u]?"":n[u];"-"===u[0]?t[e].setProperty(u,i):t[e][u]=i}else"o"===e[0]&&"n"===e[1]?(e=e.slice(2),t.events?o||(o=t.events[e]):t.events={},(t.events[e]=n)?o||t.addEventListener(e,v):t.removeEventListener(e,v)):e in t&&"list"!==e&&"type"!==e&&"draggable"!==e&&"spellcheck"!==e&&"translate"!==e&&!r?t[e]=null==n?"":n:null!=n&&!1!==n&&t.setAttribute(e,n),null!=n&&!1!==n||t.removeAttribute(e)}function C(t,e,n){function o(){t.removeChild(function t(e,n){var o=n.attributes;if(o){for(var r=0;r<n.children.length;r++)t(e.childNodes[r],n.children[r]);o.ondestroy&&o.ondestroy(e)}return e}(e,n))}var r=n.attributes&&n.attributes.onremove;r?r(e,o):o()}}(a,l,function(t,e){return n("div",{class:"container"},n("section",{class:"todoapp"},n(c,null),n(f,{state:t,actions:e}),n("section",{className:"main"},0<t.todos.filter(function(t){return!t.done}).length?n(h,{toggleAll:e.toggleAll}):"",n(v,{todos:t.todos,actions:e,filter:t.filter})),n(m,{state:t,actions:e})),n(d,null))},document.getElementById("app"));t.main=y,Object.defineProperty(t,"__esModule",{value:!0})});
