!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t,e){var r,i=[];for(n=arguments.length;n-- >2;)o.push(arguments[n]);for(;o.length;)if(Array.isArray(r=o.pop()))for(n=r.length;n--;)o.push(r[n]);else null!=r&&!0!==r&&!1!==r&&i.push("number"==typeof r?r+="":r);return"string"==typeof t?{type:t,props:e||{},children:i}:t(e||{},i)}function e(t,n){var o,r="",i=void 0===t?"undefined":d(t);if(t&&"string"===i||"number"===i)return t;if(n=n||" ",Array.isArray(t)&&t.length)for(var u=0,l=t.length;u<l;u++)(o=e(t[u],n))&&(r+=(r&&n)+o);else for(var u in t)t.hasOwnProperty(u)&&(o=t[u])&&(r+=(r&&n)+u+("object"===(void 0===o?"undefined":d(o))?e(o,n+u):""));return r}var n,o=[],r={All:0,Active:1,Completed:2},i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},u={fetch:function(){return JSON.parse(localStorage.getItem("todos-hyperapp")||"[]")},save:function(t){return localStorage.setItem("todos-hyperapp",JSON.stringify(t))}},l={input:function(t,e,n){return{input:n.value}},add:function(t){var e=t.todos.concat({id:i(),done:!1,editing:!1,value:t.input});return u.save(e),{input:"",todos:e}},editUpdate:function(t,e,n){var o=n.uuid,r=n.value,i=t.todos.map(function(t){return o===t.id?Object.assign({},t,{editing:!1,value:r}):t});return u.save(i),{todos:i}},editEnter:function(t,e,n){var o=n.uuid,r=t.todos.map(function(t){return o===t.id?Object.assign({},t,{editing:!0}):t});return u.save(r),{todos:r}},remove:function(t,e,n){var o=n.uuid,r=t.todos.filter(function(t){return o!==t.id});return u.save(r),{todos:r}},toggle:function(t,e,n){var o=n.uuid,r=t.todos.map(function(t){return o===t.id?Object.assign({},t,{done:!t.done}):t});return u.save(r),{todos:r}},toggleAll:function(t,e,n){var o=n.target.previousSibling.checked;o=!o;var r=t.todos.map(function(t){return t.done=o,t});return u.save(r),{todos:r}},filter:function(t,e,n){return{filter:n.value}},clearCompleted:function(t){var e=t.todos.filter(function(t){return!t.done});return u.save(e),{todos:e}}},c={input:"",placeholder:"What needs to be done?",todos:[],filter:r.All},a=function(){return t("header",{className:"header"},t("h1",null,"todos"))},s=function(){return t("footer",{className:"info"},t("p",null,"Double-click to edit a todo"),t("p",null,"Written by ",t("a",{href:"http://dangthanh.org"},"Dang Van Thanh")),t("p",null,"Part of ",t("a",{href:"http://todomvc.com"},"TodoMVC")))},f=function(e){return t("div",null,t("input",{type:"text",class:"new-todo",onkeyup:function(t){return 13===t.keyCode&&""!==t.target.value?e.actions.add():null},oninput:function(t){return e.actions.input({value:t.target.value})},value:e.state.input,placeholder:e.state.placeholder,autofocus:!0}))},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=(function(){function t(t){this.value=t}function e(e){function n(r,i){try{var u=e[r](i),l=u.value;l instanceof t?Promise.resolve(l.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(u.done?"return":"normal",u.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(t,e){return new Promise(function(o,u){var l={key:t,arg:e,resolve:o,reject:u,next:null};i?i=i.next=l:(r=i=l,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(n){return t("li",{class:e(["todo",{completed:n.todo.done,editing:n.todo.editing}]),key:n.todo.id},t("div",{className:"view"},t("input",{type:"checkbox",class:"toggle",checked:!!n.todo.done,onclick:function(t){return n.actions.toggle({uuid:n.todo.id})}}),t("label",{ondblclick:function(t){return n.actions.editEnter({uuid:n.todo.id})}},n.todo.value),t("button",{class:"destroy",onclick:function(t){return n.actions.remove({uuid:n.todo.id})}})),t("input",{type:"text",class:"edit",onkeyup:function(t){return 13===t.keyCode?n.actions.editUpdate({uuid:n.todo.id,value:t.target.value}):null},onblur:function(t){return n.actions.editUpdate({uuid:n.todo.id,value:t.target.value})},value:n.todo.value}))}),v=function(e){return t("ul",{class:"todo-list"},e.todos.filter(function(t){return e.filter===r.Completed?t.done:e.filter===r.Active?!t.done:e.filter===r.All}).map(function(n){return t(p,{todo:n,actions:e.actions})}))},y=function(e){return t("button",{className:"clear-completed",onclick:e.clearCompleted},"Clear completed")},h=function(e){return t("footer",{className:"footer"},t("span",{className:"todo-count"},e.state.todos.filter(function(t){return!t.done}).length," item left"),t("ul",{className:"filters"},Object.keys(r).map(function(n){return t("li",null,t("a",{href:"#",class:e.state.filter===r[n]?"selected":"",onclick:function(){return e.actions.filter({value:r[n]})}},n))})),e.state.todos.filter(function(t){return t.done}).length>0?t(y,{clearCompleted:e.actions.clearCompleted}):"")},m=function(e){return t("div",null,t("input",{type:"checkbox",className:"toggle-all",id:"toggle-all"}),t("label",{htmlFor:"toggle-all",onclick:function(t){return e.toggleAll(t)}},"Mark all as complete"))};!function(e,n){function o(){e.view&&!m&&requestAnimationFrame(r,m=!m)}function r(){i(b=h(n,b,k,k=e.view(g,x),m=!m))}function i(t){for(;t=w.pop();)t()}function u(e,n){return e&&t(e.tagName.toLowerCase(),{},n.call(e.childNodes,function(t){return 3===t.nodeType?t.nodeValue:u(t,n)}))}function l(t,e,n){t.init&&w.push(function(){t.init(e,n)}),a(e,t.state),c(e,n,t.actions);for(var o in t.modules)l(t.modules[o],e[o]={},n[o]={})}function c(t,e,n){function r(e){return"function"==typeof e?r(e(t)):e&&o(a(t,e)),t}Object.keys(n||{}).map(function(o){"function"==typeof n[o]?e[o]=function(i){return"function"==typeof(i=n[o](t,e,i))?i(r):r(i)}:c(t[o]||(t[o]={}),e[o]={},n[o])})}function a(t,e){for(var n in e)t[n]=e[n];return t}function s(t,e){return a(a({},t),e)}function f(t,e){if("string"==typeof t)n=document.createTextNode(t);else{var n=(e=e||"svg"===t.type)?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(t.props&&t.props.oncreate&&w.push(function(){t.props.oncreate(n)}),o=0;o<t.children.length;o++)n.appendChild(f(t.children[o],e));for(var o in t.props)d(n,o,t.props[o])}return n}function d(t,e,n,o){if("key"===e);else if("style"===e)for(var e in s(o,n=n||{}))t.style[e]=n[e]||"";else{try{t[e]=n}catch(t){}"function"!=typeof n&&(n?t.setAttribute(e,n):t.removeAttribute(e))}}function p(t,e,n){for(var o in s(e,n)){var r=n[o],i="value"===o||"checked"===o?t[o]:e[o];r!==i&&r!==i&&d(t,o,r,i)}n&&n.onupdate&&w.push(function(){n.onupdate(t,e)})}function v(t,e,n){function o(){t.removeChild(e)}n&&n.onremove&&"function"==typeof(n=n.onremove(e))?n(o):o()}function y(t){if(t&&t.props)return t.props.key}function h(t,e,n,o,r,i){if(null==n)e=t.insertBefore(f(o,r),e);else if(null!=o.type&&o.type===n.type){p(e,n.props,o.props),r=r||"svg"===o.type;for(var u=o.children.length,l=n.children.length,c={},a=[],s={},d=0;d<l;d++)g=a[d]=e.childNodes[d],null!=(A=y(x=n.children[d]))&&(c[A]=[g,x]);for(var d=0,m=0;m<u;){var g=a[d],x=n.children[d],b=o.children[m];if(s[A=y(x)])d++;else{var k=y(b),w=c[k]||[];null==k?(null==A&&(h(e,g,x,b,r),m++),d++):(A===k?(h(e,w[0],w[1],b,r),d++):w[0]?(e.insertBefore(w[0],g),h(e,w[0],w[1],b,r)):h(e,g,null,b,r),m++,s[k]=b)}}for(;d<l;){var A=y(x=n.children[d]);null==A&&v(e,a[d],x.props),d++}for(var d in c){var N=(w=c[d])[1];s[N.props.key]||v(e,w[0],N.props)}}else e&&o!==e.nodeValue&&("string"==typeof o&&"string"==typeof n?e.nodeValue=o:(e=t.insertBefore(f(o,r),i=e),v(t,i,n.props)));return e}var m,g,x,b=(n=n||document.body).children[0],k=u(b,[].map),w=[];o(i(l(e,g={},x={})))}({init:function(t){t.todos=u.fetch()},state:c,actions:l,view:function(e,n){return t("div",{class:"container"},t("section",{class:"todoapp"},t(a,null),t(f,{state:e,actions:n}),t("section",{className:"main"},e.todos.filter(function(t){return!t.done}).length>0?t(m,{toggleAll:n.toggleAll}):"",t(v,{todos:e.todos,actions:n,filter:e.filter})),t(h,{state:e,actions:n})),t(s,null))}},document.getElementById("app"))});
