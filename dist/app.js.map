{"version":3,"file":"app.js","sources":["../node_modules/hyperapp/src/h.js","../node_modules/hyperapp/src/app.js","../src/utils/index.js","../src/actions/index.js","../src/state/index.js","../src/views/todo-header.js","../src/views/todo-footer.js","../src/views/todo-input.js","../node_modules/classwrap/src/index.js","../src/views/todo-item.js","../src/views/todo-list.js","../src/views/todo-filter.js","../src/views/index.js","../src/app.js"],"sourcesContent":["var i\nvar stack = []\n\nexport function h(type, props) {\n  var node\n  var children = []\n\n  for (i = arguments.length; i-- > 2; ) {\n    stack.push(arguments[i])\n  }\n\n  while (stack.length) {\n    if (Array.isArray((node = stack.pop()))) {\n      for (i = node.length; i--; ) {\n        stack.push(node[i])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(typeof node === \"number\" ? (node = node + \"\") : node)\n    }\n  }\n\n  return typeof type === \"string\"\n    ? { type: type, props: props || {}, children: children }\n    : type(props || {}, children)\n}\n","import { h } from \"./h\"\n\nexport function app(props, container) {\n  var root = (container = container || document.body).children[0]\n  var node = toVNode(root, [].map)\n  var callbacks = []\n  var skipRender\n  var globalState\n  var globalActions\n\n  repaint(flush(init(props, (globalState = {}), (globalActions = {}))))\n\n  return globalActions\n\n  function repaint() {\n    if (props.view && !skipRender) {\n      requestAnimationFrame(render, (skipRender = !skipRender))\n    }\n  }\n\n  function render() {\n    flush(\n      (root = patchElement(\n        container,\n        root,\n        node,\n        (node = props.view(globalState, globalActions)),\n        (skipRender = !skipRender)\n      ))\n    )\n  }\n\n  function flush(cb) {\n    while ((cb = callbacks.pop())) cb()\n  }\n\n  function toVNode(element, map) {\n    return (\n      element &&\n      h(\n        element.tagName.toLowerCase(),\n        {},\n        map.call(element.childNodes, function(element) {\n          return element.nodeType === 3\n            ? element.nodeValue\n            : toVNode(element, map)\n        })\n      )\n    )\n  }\n\n  function init(module, state, actions) {\n    if (module.init) {\n      callbacks.push(function() {\n        module.init(state, actions)\n      })\n    }\n\n    assign(state, module.state)\n\n    initActions(state, actions, module.actions)\n\n    for (var i in module.modules) {\n      init(module.modules[i], (state[i] = {}), (actions[i] = {}))\n    }\n  }\n\n  function initActions(state, actions, source) {\n    Object.keys(source || {}).map(function(i) {\n      if (typeof source[i] === \"function\") {\n        actions[i] = function(data) {\n          return typeof (data = source[i](state, actions, data)) === \"function\"\n            ? data(update)\n            : update(data)\n        }\n      } else {\n        initActions(state[i] || (state[i] = {}), (actions[i] = {}), source[i])\n      }\n    })\n\n    function update(data) {\n      return (\n        typeof data === \"function\"\n          ? update(data(state))\n          : data && repaint(assign(state, data)),\n        state\n      )\n    }\n  }\n\n  function assign(target, source) {\n    for (var i in source) {\n      target[i] = source[i]\n    }\n    return target\n  }\n\n  function merge(target, source) {\n    return assign(assign({}, target), source)\n  }\n\n  function createElement(node, isSVG) {\n    if (typeof node === \"string\") {\n      var element = document.createTextNode(node)\n    } else {\n      var element = (isSVG = isSVG || node.type === \"svg\")\n        ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.type)\n        : document.createElement(node.type)\n\n      if (node.props && node.props.oncreate) {\n        callbacks.push(function() {\n          node.props.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(createElement(node.children[i], isSVG))\n      }\n\n      for (var i in node.props) {\n        setElementProp(element, i, node.props[i])\n      }\n    }\n    return element\n  }\n\n  function setElementProp(element, name, value, oldValue) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var name in merge(oldValue, (value = value || {}))) {\n        element.style[name] = value[name] || \"\"\n      }\n    } else {\n      try {\n        element[name] = value\n      } catch (_) {}\n\n      if (typeof value !== \"function\") {\n        if (value) {\n          element.setAttribute(name, value)\n        } else {\n          element.removeAttribute(name)\n        }\n      }\n    }\n  }\n\n  function updateElement(element, oldProps, props) {\n    for (var i in merge(oldProps, props)) {\n      var value = props[i]\n      var oldValue = i === \"value\" || i === \"checked\" ? element[i] : oldProps[i]\n\n      if (value !== oldValue) {\n        value !== oldValue && setElementProp(element, i, value, oldValue)\n      }\n    }\n\n    if (props && props.onupdate) {\n      callbacks.push(function() {\n        props.onupdate(element, oldProps)\n      })\n    }\n  }\n\n  function removeElement(parent, element, props) {\n    if (\n      props &&\n      props.onremove &&\n      typeof (props = props.onremove(element)) === \"function\"\n    ) {\n      props(remove)\n    } else {\n      remove()\n    }\n\n    function remove() {\n      parent.removeChild(element)\n    }\n  }\n\n  function getKey(node) {\n    if (node && node.props) {\n      return node.props.key\n    }\n  }\n\n  function patchElement(parent, element, oldNode, node, isSVG, nextSibling) {\n    if (oldNode == null) {\n      element = parent.insertBefore(createElement(node, isSVG), element)\n    } else if (node.type != null && node.type === oldNode.type) {\n      updateElement(element, oldNode.props, node.props)\n\n      isSVG = isSVG || node.type === \"svg\"\n\n      var len = node.children.length\n      var oldLen = oldNode.children.length\n      var oldKeyed = {}\n      var oldElements = []\n      var keyed = {}\n\n      for (var i = 0; i < oldLen; i++) {\n        var oldElement = (oldElements[i] = element.childNodes[i])\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n\n        if (null != oldKey) {\n          oldKeyed[oldKey] = [oldElement, oldChild]\n        }\n      }\n\n      var i = 0\n      var j = 0\n\n      while (j < len) {\n        var oldElement = oldElements[i]\n        var oldChild = oldNode.children[i]\n        var newChild = node.children[j]\n\n        var oldKey = getKey(oldChild)\n        if (keyed[oldKey]) {\n          i++\n          continue\n        }\n\n        var newKey = getKey(newChild)\n\n        var keyedNode = oldKeyed[newKey] || []\n\n        if (null == newKey) {\n          if (null == oldKey) {\n            patchElement(element, oldElement, oldChild, newChild, isSVG)\n            j++\n          }\n          i++\n        } else {\n          if (oldKey === newKey) {\n            patchElement(element, keyedNode[0], keyedNode[1], newChild, isSVG)\n            i++\n          } else if (keyedNode[0]) {\n            element.insertBefore(keyedNode[0], oldElement)\n            patchElement(element, keyedNode[0], keyedNode[1], newChild, isSVG)\n          } else {\n            patchElement(element, oldElement, null, newChild, isSVG)\n          }\n\n          j++\n          keyed[newKey] = newChild\n        }\n      }\n\n      while (i < oldLen) {\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n        if (null == oldKey) {\n          removeElement(element, oldElements[i], oldChild.props)\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        var keyedNode = oldKeyed[i]\n        var reusableNode = keyedNode[1]\n        if (!keyed[reusableNode.props.key]) {\n          removeElement(element, keyedNode[0], reusableNode.props)\n        }\n      }\n    } else if (element && node !== element.nodeValue) {\n      if (typeof node === \"string\" && typeof oldNode === \"string\") {\n        element.nodeValue = node\n      } else {\n        element = parent.insertBefore(\n          createElement(node, isSVG),\n          (nextSibling = element)\n        )\n        removeElement(parent, nextSibling, oldNode.props)\n      }\n    }\n    return element\n  }\n}\n","export const FILTERINFO = { All: 0, Active: 1, Completed: 2 }\n\nexport const uuid = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n    return v.toString(16)\n  })\n}","import { uuid } from '../utils'\n\nexport default {\n  input: (state, actions, { value }) => ({\n    input: value\n  }),\n  add: (state) => ({\n    input: '',\n    todos: state.todos.concat({ \n      id: uuid(), \n      done: false,\n      editing: false,\n      value: state.input\n    })\n  }),\n  editUpdate: (state, actions, { uuid, value }) => ({\n    todos: state.todos.map(t => uuid === t.id ? Object.assign({}, t, { editing: false, value: value }) : t)\n  }),\n  editEnter: (state, actions, { uuid }) => ({\n    todos: state.todos.map(t => uuid === t.id ? Object.assign({}, t, { editing: true }) : t)\n  }),\n  remove: (state, actions, { uuid }) => ({\n    todos: state.todos.filter(t => uuid !== t.id)\n  }),\n  toggle: (state, actions, { uuid }) => ({\n    todos: state.todos.map(t => uuid === t.id ? Object.assign({}, t, { done: !t.done }) : t)\n  }),\n  toggleAll: (state) => ({\n    todos: state.todos.map(t => {\n      t.done = !t.done\n      return t\n    })\n  }),\n  filter: (state, actions, { value }) => ({ filter: value }),\n  clearCompleted: (state) => ({\n    todos: state.todos.filter(t => !t.done)\n  })\n}","import { FILTERINFO } from '../utils'\n\nexport default {\n  input: '',\n  placeholder: 'What needs to be done?',\n  todos: [],\n  filter: FILTERINFO.All\n}","import { h } from 'hyperapp'\n\nexport default () => (\n  <header className=\"header\">\n    <h1>todos</h1>\n  </header>\n)","import { h } from 'hyperapp'\n\nexport default () => (\n  <footer className=\"info\">\n    <p>Double-click to edit a todo</p>\n    <p>Written by <a href=\"http://dangthanh.org\">Dang Van Thanh</a></p>\n    <p>Part of <a href=\"http://todomvc.com\">TodoMVC</a></p>\n  </footer>\n)","import { h } from 'hyperapp'\n\nexport default (props) => (\n  <div>\n    <input \n    type=\"text\" \n    class=\"new-todo\"\n    onkeyup={e => e.keyCode === 13 && e.target.value !== '' ? props.actions.add() : null}\n    oninput={e => props.actions.input({ value: e.target.value })}\n    value={props.state.input}\n    placeholder={props.state.placeholder} \n    autofocus/>\n  </div>\n)","export default function wrap(classes, prefix) {\n  var value\n  var className = \"\"\n  var type = typeof classes\n\n  if ((classes && type === \"string\") || type === \"number\") {\n    return classes\n  }\n\n  prefix = prefix || \" \"\n\n  if (Array.isArray(classes) && classes.length) {\n    for (var i = 0, l = classes.length; i < l; i++) {\n      if ((value = wrap(classes[i], prefix))) {\n        className += (className && prefix) + value\n      }\n    }\n  } else {\n    for (var i in classes) {\n      if (classes.hasOwnProperty(i) && (value = classes[i])) {\n        className +=\n          (className && prefix) +\n          i +\n          (typeof value === \"object\" ? wrap(value, prefix + i) : \"\")\n      }\n    }\n  }\n\n  return className\n}\n","import { h } from 'hyperapp'\nimport cw from 'classwrap'\n\nexport default (props) => (\n  <li class={cw(['todo', { 'completed': props.todo.done, 'editing': props.todo.editing }])}>\n    <div className=\"view\">\n      <input \n        type=\"checkbox\" \n        class=\"toggle\" \n        checked={props.todo.done ? true : false} \n        onclick={e => props.actions.toggle({ uuid: props.todo.id })}/>\n      <label ondblclick={e => props.actions.editEnter({ uuid: props.todo.id })}>{props.todo.value}</label>\n      <button class=\"destroy\" onclick={e => props.actions.remove({ uuid: props.todo.id })}></button>\n    </div>\n    <input\n      type=\"text\" \n      class=\"edit\"\n      onkeyup={e => e.keyCode === 13 ? props.actions.editUpdate({ uuid: props.todo.id, value: e.target.value }) : null}\n      onblur={e => props.actions.editUpdate({ uuid: props.todo.id, value: e.target.value })} \n      value={props.todo.value}/>\n  </li>\n)","import { h } from 'hyperapp'\nimport { FILTERINFO } from '../utils'\nimport TodoItem from './todo-item'\n\nexport default (props) => (\n  <ul class=\"todo-list\">\n    {props.todos.filter(t => \n        props.filter === FILTERINFO.Completed \n        ? t.done : props.filter === FILTERINFO.Active \n        ? !t.done : props.filter === FILTERINFO.All)\n      .map(todo => (\n      <TodoItem todo={todo} actions={props.actions} />\n    ))}\n  </ul>\n)","import { h } from 'hyperapp'\nimport { FILTERINFO } from '../utils'\n\nexport default (props) => (\n  <footer className=\"footer\">\n    <span className=\"todo-count\">{props.state.todos.filter(t => !t.done).length} item left</span>\n    <ul className=\"filters\">\n      {Object.keys(FILTERINFO).map(key => (\n        <li>\n          <a \n            href=\"#\" \n            class={props.state.filter === FILTERINFO[key] ? 'selected' : ''}\n            onclick={() => props.actions.filter({ value: FILTERINFO[key] })}>\n            {key}\n          </a>\n        </li>\n      ))}\n    </ul>\n    <button className=\"clear-completed\" onclick={props.actions.clearCompleted}>Clear completed</button>\n  </footer>\n)","import { h } from 'hyperapp'\nimport TodoHeader from './todo-header'\nimport TodoFooter from './todo-footer'\nimport TodoInput from './todo-input'\nimport TodoList from './todo-list'\nimport TodoFilter from './todo-filter'\n\nexport default (state, actions) => (\n  <div class=\"container\">\n    <section class=\"todoapp\">\n      <TodoHeader/>\n      <TodoInput state={state} actions={actions} />\n      <section className=\"main\">\n        <input type=\"checkbox\" className=\"toggle-all\" id=\"toggle-all\"/>\n        <label htmlFor=\"toggle-all\" onclick={actions.toggleAll}>Mark all as complete</label>\n        <TodoList todos={state.todos} actions={actions} filter={state.filter} />\n      </section>\n      <TodoFilter state={state} actions={actions} />\n    </section>\n    <TodoFooter/>\n  </div>\n)","import { app } from 'hyperapp'\nimport actions from './actions'\nimport state from './state'\nimport view from './views'\n\napp({ state, actions, view }, document.getElementById('app'))"],"names":["i","stack","h","type","props","node","children","arguments","length","push","Array","isArray","pop","app","container","root","document","body","toVNode","map","callbacks","skipRender","globalState","globalActions","flush","init","repaint","view","render","patchElement","cb","element","tagName","toLowerCase","call","childNodes","nodeType","nodeValue","module","state","actions","modules","initActions","source","keys","data","update","assign","target","merge","createElement","isSVG","createTextNode","createElementNS","oncreate","appendChild","setElementProp","name","value","oldValue","style","_","setAttribute","removeAttribute","updateElement","oldProps","onupdate","removeElement","parent","onremove","remove","removeChild","getKey","key","oldNode","nextSibling","insertBefore","len","oldLen","oldKeyed","oldElements","keyed","oldElement","oldChild","oldKey","j","newChild","newKey","keyedNode","reusableNode","FILTERINFO","All","Active","Completed","uuid","replace","c","r","Math","random","v","toString","todos","concat","input","t","id","Object","editing","filter","done","e","keyCode","add","placeholder","wrap","classes","prefix","className","l","hasOwnProperty","cw","todo","toggle","editEnter","editUpdate","clearCompleted","toggleAll","getElementById"],"mappings":"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"}