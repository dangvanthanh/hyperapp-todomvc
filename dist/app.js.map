{"version":3,"file":"app.js","sources":["../node_modules/hyperapp/src/index.js","../src/utils/index.js","../src/store/index.js","../src/actions/index.js","../src/state/index.js","../src/views/todo-header.js","../src/views/todo-footer.js","../src/views/todo-input.js","../node_modules/classcat/src/index.js","../src/views/todo-item.js","../src/views/todo-list.js","../src/views/todo-clear-button.js","../src/views/todo-filter.js","../src/views/todo-toggle-all.js","../src/views/index.js","../src/app.js"],"sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null ? node : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function set(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(get(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = get(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = set(path, clone(state, result), globalState))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        var style = value == null || value[i] == null ? \"\" : value[i]\n        if (i[0] === \"-\") {\n          element[name].setProperty(i, style)\n        } else {\n          element[name][i] = style\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (name in element && name !== \"list\" && !isSvg) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","export const FILTERINFO = { All: 0, Active: 1, Completed: 2 };\n\nexport const uuid = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n\nexport const assignTodoById = (todos, id, ...todo) => {\n  let todoItem = todo[0];\n  return todos.map(t => (id === t.id ? Object.assign({}, t, todoItem) : t));\n};\n","const STORAGE_KEY = 'todos-hyperapp';\n\nexport default {\n  fetch: () => JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'),\n  save: todos => localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))\n};\n","import { uuid, assignTodoById } from '../utils';\nimport store from '../store';\n\nexport default {\n  input: ({ value }) => state => ({\n    input: value\n  }),\n  add: () => state => {\n    const todos = state.todos.concat({\n      id: uuid(),\n      done: false,\n      editing: false,\n      value: state.input\n    });\n    store.save(todos);\n    return {\n      input: '',\n      todos: todos\n    };\n  },\n  editUpdate: ({ uuid, value }) => (state, actions) => {\n    const todos = assignTodoById(state.todos, uuid, {\n      editing: false,\n      value: value\n    });\n    store.save(todos);\n    return {\n      todos: todos\n    };\n  },\n  editEnter: ({ uuid, e }) => (state, actions) => {\n    actions.editEnterDbClick(uuid);\n    actions.editEnterFocus(e);\n  },\n  editEnterDbClick: uuid => (state, actions) => {\n    const todos = assignTodoById(state.todos, uuid, { editing: true });\n    store.save(todos);\n    return {\n      todos: todos\n    };\n  },\n  editEnterFocus: e => (state, actions) => {\n    const input = e.target.parentNode.parentNode.querySelector('.edit');\n    input.focus();\n  },\n  remove: ({ uuid }) => (state, actions) => {\n    const todos = state.todos.filter(t => uuid !== t.id);\n    store.save(todos);\n    return {\n      todos: todos\n    };\n  },\n  toggle: ({ uuid }) => (state, actions) => {\n    const todos = state.todos.map(\n      t => (uuid === t.id ? Object.assign({}, t, { done: !t.done }) : t)\n    );\n    store.save(todos);\n    return {\n      todos: todos\n    };\n  },\n  toggleAll: e => (state, actions) => {\n    let isCheckedAll = e.target.previousSibling.checked;\n    isCheckedAll = !isCheckedAll;\n    const todos = state.todos.map(t => {\n      t.done = isCheckedAll;\n      return t;\n    });\n    store.save(todos);\n    return {\n      todos: todos\n    };\n  },\n  filter: ({ value }) => (state, actions) => ({ filter: value }),\n  clearCompleted: () => state => {\n    const todos = state.todos.filter(t => !t.done);\n    store.save(todos);\n    return {\n      todos: todos\n    };\n  }\n};\n","import { FILTERINFO } from '../utils';\n\nexport default {\n  input: '',\n  placeholder: 'What needs to be done?',\n  todos: [],\n  filter: FILTERINFO.All\n};\n","import { h } from 'hyperapp';\n\nexport default () => (\n  <header className=\"header\">\n    <h1>todos</h1>\n  </header>\n);\n","import { h } from 'hyperapp';\n\nexport default () => (\n  <footer className=\"info\">\n    <p>Double-click to edit a todo</p>\n    <p>\n      Written by <a href=\"http://dangthanh.org\">Dang Van Thanh</a>\n    </p>\n    <p>\n      Part of <a href=\"http://todomvc.com\">TodoMVC</a>\n    </p>\n  </footer>\n);\n","import { h } from 'hyperapp';\n\nexport default props => (\n  <div>\n    <input\n      type=\"text\"\n      class=\"new-todo\"\n      onkeyup={e =>\n        e.keyCode === 13 && e.target.value !== '' ? props.actions.add() : null\n      }\n      oninput={e => props.actions.input({ value: e.target.value })}\n      value={props.state.input}\n      placeholder={props.state.placeholder}\n      autofocus\n    />\n  </div>\n);\n","export default function cc(classes) {\n  var out = \"\"\n  var type = typeof classes\n\n  if (type === \"string\" || type === \"number\") {\n    return classes || \"\"\n  }\n\n  if (Array.isArray(classes) && classes.length > 0) {\n    for (var i = 0, len = classes.length; i < len; i++) {\n      var next = cc(classes[i])\n      if (next) {\n        out += (out && \" \") + next\n      }\n    }\n  } else {\n    for (var key in classes) {\n      if (classes.hasOwnProperty(key) && classes[key]) {\n        out += (out && \" \") + key\n      }\n    }\n  }\n\n  return out\n}\n","import { h } from 'hyperapp';\nimport cc from 'classcat';\n\nexport default props => (\n  <li\n    class={cc([\n      'todo',\n      { completed: props.todo.done, editing: props.todo.editing }\n    ])}\n    key={props.todo.id}\n  >\n    <div className=\"view\">\n      <input\n        type=\"checkbox\"\n        class=\"toggle\"\n        checked={!!props.todo.done}\n        onclick={e => props.actions.toggle({ uuid: props.todo.id })}\n      />\n      <label\n        ondblclick={e => props.actions.editEnter({ uuid: props.todo.id, e: e })}\n      >\n        {props.todo.value}\n      </label>\n      <button\n        class=\"destroy\"\n        onclick={e => props.actions.remove({ uuid: props.todo.id })}\n      />\n    </div>\n    <input\n      type=\"text\"\n      class=\"edit\"\n      onkeyup={e =>\n        e.keyCode === 13\n          ? props.actions.editUpdate({\n              uuid: props.todo.id,\n              value: e.target.value\n            })\n          : null\n      }\n      onblur={e =>\n        props.actions.editUpdate({ uuid: props.todo.id, value: e.target.value })\n      }\n      value={props.todo.value}\n    />\n  </li>\n);\n","import { h } from 'hyperapp';\nimport { FILTERINFO } from '../utils';\nimport TodoItem from './todo-item';\n\nexport default props => (\n  <ul class=\"todo-list\">\n    {props.todos\n      .filter(\n        t =>\n          props.filter === FILTERINFO.Completed\n            ? t.done\n            : props.filter === FILTERINFO.Active\n              ? !t.done\n              : props.filter === FILTERINFO.All\n      )\n      .map(todo => <TodoItem todo={todo} actions={props.actions} />)}\n  </ul>\n);\n","import { h } from 'hyperapp';\n\nexport default props => (\n  <button className=\"clear-completed\" onclick={props.clearCompleted}>\n    Clear completed\n  </button>\n);\n","import { h } from 'hyperapp';\nimport { FILTERINFO } from '../utils';\nimport TodoClearButton from './todo-clear-button';\n\nexport default props => (\n  <footer className=\"footer\">\n    <span className=\"todo-count\">\n      {props.state.todos.filter(t => !t.done).length} item left\n    </span>\n    <ul className=\"filters\">\n      {Object.keys(FILTERINFO).map(key => (\n        <li>\n          <a\n            href=\"#\"\n            class={props.state.filter === FILTERINFO[key] ? 'selected' : ''}\n            onclick={() => props.actions.filter({ value: FILTERINFO[key] })}\n          >\n            {key}\n          </a>\n        </li>\n      ))}\n    </ul>\n    {props.state.todos.filter(t => t.done).length > 0 ? (\n      <TodoClearButton clearCompleted={props.actions.clearCompleted} />\n    ) : (\n      ''\n    )}\n  </footer>\n);\n","import { h } from 'hyperapp';\n\nexport default props => (\n  <div>\n    <input type=\"checkbox\" className=\"toggle-all\" id=\"toggle-all\" />\n    <label htmlFor=\"toggle-all\" onclick={e => props.toggleAll(e)}>\n      Mark all as complete\n    </label>\n  </div>\n);\n","import { h } from 'hyperapp';\nimport TodoHeader from './todo-header';\nimport TodoFooter from './todo-footer';\nimport TodoInput from './todo-input';\nimport TodoList from './todo-list';\nimport TodoFilter from './todo-filter';\nimport TodoToggleAll from './todo-toggle-all';\n\nexport default (state, actions) => (\n  <div class=\"container\">\n    <section class=\"todoapp\">\n      <TodoHeader />\n      <TodoInput state={state} actions={actions} />\n      <section className=\"main\">\n        {state.todos.filter(t => !t.done).length > 0 ? (\n          <TodoToggleAll toggleAll={actions.toggleAll} />\n        ) : (\n          ''\n        )}\n        <TodoList todos={state.todos} actions={actions} filter={state.filter} />\n      </section>\n      <TodoFilter state={state} actions={actions} />\n    </section>\n    <TodoFooter />\n  </div>\n);\n","import { app } from 'hyperapp';\nimport actions from './actions';\nimport state from './state';\nimport view from './views';\nimport store from './store';\n\nstate.todos = store.fetch();\nstate.todos = state.todos.map(todo => {\n  todo.editing = false;\n  return todo;\n});\n\nexport const main = app(state, actions, view, document.getElementById('app'));\n"],"names":["h","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","app","state","actions","view","container","map","rootElement","oldNode","recycleElement","lifecycle","skipRender","isRecycling","globalState","clone","wiredActions","wireStateToActions","scheduleRender","element","toLowerCase","call","childNodes","nodeType","nodeValue","resolveNode","render","patch","setTimeout","target","source","out","i","set","path","value","slice","get","action","data","result","then","concat","getKey","eventListener","event","currentTarget","events","type","updateAttribute","oldValue","isSvg","style","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createElement","document","createTextNode","createElementNS","oncreate","appendChild","updateElement","oldAttributes","cb","onupdate","removeChildren","ondestroy","removeElement","parent","done","removeChild","onremove","newElement","insertBefore","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","k","newKey","keyedNode","FILTERINFO","All","Active","Completed","uuid","replace","r","Math","random","v","c","toString","assignTodoById","todos","id","todoItem","t","Object","assign","STORAGE_KEY","fetch","JSON","parse","localStorage","getItem","save","setItem","stringify","input","add","editing","store","editUpdate","editEnter","e","editEnterDbClick","editEnterFocus","parentNode","querySelector","focus","remove","filter","toggle","toggleAll","isCheckedAll","previousSibling","checked","clearCompleted","placeholder","keyCode","props","cc","classes","Array","isArray","len","next","hasOwnProperty","completed","todo","keys","main","getElementById"],"mappings":"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"}